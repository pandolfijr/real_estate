import{A as b,B as C,c as V}from"./utils-B-CemkDS.js";import{S as l}from"./sweetalert2-z6gKu1nJ.js";import{a as p}from"./axios-B4uVmeYG.js";import{r as k,o as a,c as r,a as t,t as n,n as m,j as c,k as h,F as _,h as v,e as g,v as f,b as D,m as w}from"./app-e3q45BkK.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const P={data:function(){return{data:{},account:{id:"",description:"",original_value:"",penalty_value:"",final_value:"",type:1,status:1,payment_method:"",category:"",observations:"",discharge_date:"",expect_date:"",id_supplier:"",id_check:"",id_property:""},category_account_pay:b,payment_method:C,onError:V,config:{decimal:",",thousands:".",prefix:"R$ ",precision:2,masked:!1},suppliers:{},properties:{},property:{}}},computed:{},methods:{getAccount(){p.get("/accounts-pay/"+this.$route.params.id).then(o=>{this.account=o.data.account}).catch(o=>{console.error("Houve um problema com a requisição:",o)})},saveAccount(){return this.validateDischargeDate()?p.post("/accounts-pay",this.account).then(o=>{l.fire({position:"top-end",icon:"success",title:o.data.message,showConfirmButton:!1,timer:2500}),this.$router.go(-1)}).catch(o=>{o=this.onError(o),l.fire({position:"top-end",icon:"error",title:o.message,showConfirmButton:!1,timer:2500})}):!1},updateAccount(){p.put("/accounts-pay/"+this.$route.params.id,this.account).then(o=>{l.fire({position:"top-end",icon:"success",title:o.data.message,showConfirmButton:!1,timer:2500}),this.$router.go(-1)}).catch(o=>{o=this.onError(o),l.fire({position:"top-end",icon:"error",title:o.message,showConfirmButton:!1,timer:2500})})},getSuppliers(){p.get("/suppliers").then(o=>{this.suppliers=o.data.suppliers.data}).catch(o=>{console.error("Houve um problema com a requisição:",o)})},validateDischargeDate(){return this.account.status==2&&this.account.discharge_date==""?(l.fire({position:"top-end",icon:"error",title:"O campo data de quitação é obrigatório",showConfirmButton:!1,timer:2500}),!1):!0},back(){this.$router.go(-1)},treatCategory(o){o==6&&(this.account.id_property="",this.property={})},getProperties(){p.get("/properties",{params:{order:"reference"}}).then(o=>{const s=o.data.properties.data;this.properties=s.filter(u=>u.transaction&&u.transaction.length>0)}).catch(o=>{l.fire({position:"top-end",icon:"error",title:o.response.data.message,showConfirmButton:!1,timer:2500})})},treatProperty(o){o?(this.property=this.properties.filter((s,u)=>s.id==o)[0],console.log(this.property),this.account.id_locator=this.property.id_locator):this.property={}}},beforeMount(){this.getSuppliers(),this.getProperties(),this.$route.params.id&&this.getAccount()}},S={class:"container-fluid"},B={class:"col-md-12"},E=t("h2",null,"Conta à Pagar",-1),I={class:"card card-primary"},$={class:"card-header"},U={class:"card-title"},O={class:"card-body"},q={class:"row"},M={class:"form-group"},F=t("label",{for:"inputCategory"},"Categoria",-1),N=t("option",{value:""},"Selecione a categoria",-1),j=["value"],z={class:"form-group"},H=t("label",{for:"inputIdAccount"},"Fornecedor",-1),L=["disabled"],R=t("option",{value:""},"Selecione o Fornecedor",-1),T=["id","value"],G={key:0,class:"col-sm-4"},J={class:"form-group"},K=t("label",{for:"inputIdImovel"},"Imóvel",-1),Q=t("option",{value:""},"Selecione...",-1),W=["id","value"],X={class:"row"},Y={key:0,class:"col-sm-4"},Z={class:"form-group"},x=t("label",{for:"inputIdAccount"},"Proprietário",-1),oo={key:0,class:"form-control",readonly:""},to={key:1,class:"form-control",readonly:""},eo={class:"form-group"},so=t("label",{for:"inputDescription"},"Descrição",-1),ao={class:"form-group"},ro=t("label",{for:"inputObservations"},"Observações",-1),io={class:"row"},no={class:"col-sm-4"},co={class:"form-group"},lo=t("label",{for:"inputExpectDate"},"Data Vencimento",-1),po={class:"col-sm-4"},uo={class:"form-group"},mo=t("label",{for:"inputPaymentMethod"},"Método de Pagamento",-1),ho=t("option",{value:""},"Selecione a opção",-1),_o=["value"],vo={class:"col-sm-4"},fo={class:"form-group"},go=t("label",{for:"inputOriginalValue"},"Valor",-1),yo={class:"input-group"},bo=t("div",{class:"input-group-prepend"},[t("span",{class:"input-group-text"},[t("i",{class:"fas fa-dollar-sign"})])],-1),Co=t("div",{class:"row"},[t("div",{class:"col-sm-12"},[t("div",{class:"card-footer"})])],-1),Vo={class:"modal-footer justify-content-center"};function ko(o,s,u,Do,wo,d){const y=k("money3");return a(),r("div",S,[t("div",B,[E,t("div",I,[t("div",$,[t("h3",U,n(o.account.id?"Editar Conta":"Cadastrar Conta"),1)]),t("div",O,[t("div",q,[t("div",{class:m(o.account.category==6?"col-sm-4":"col-sm-6")},[t("div",M,[F,c(t("select",{class:"custom-select",id:"inputCategory",name:"category",onChange:s[0]||(s[0]=e=>d.treatCategory(e.target.value)),"onUpdate:modelValue":s[1]||(s[1]=e=>o.account.category=e)},[N,(a(!0),r(_,null,v(o.category_account_pay,(e,i)=>(a(),r("option",{key:i,value:i},n(e),9,j))),128))],544),[[h,o.account.category]])])],2),t("div",{class:m(o.account.category==6?"col-sm-4":"col-sm-6")},[t("div",z,[H,c(t("select",{class:"custom-select",id:"inputIdAccount",name:"id_supplier",required:"",disabled:!o.account.category,"onUpdate:modelValue":s[2]||(s[2]=e=>o.account.id_supplier=e)},[R,(a(!0),r(_,null,v(o.suppliers,e=>(a(),r("option",{key:e.id,id:e.id,value:e.id},n(e.name),9,T))),128))],8,L),[[h,o.account.id_supplier]])])],2),o.account.category==6?(a(),r("div",G,[t("div",J,[K,c(t("select",{class:"custom-select",id:"inputIdImovel",name:"id_property",required:"","onUpdate:modelValue":s[3]||(s[3]=e=>o.account.id_property=e),onChange:s[4]||(s[4]=e=>d.treatProperty(e.target.value))},[Q,(a(!0),r(_,null,v(o.properties,(e,i)=>(a(),r("option",{key:i,id:i,value:e.id},n("["+e.reference+"] - "+e.description),9,W))),128))],544),[[h,o.account.id_property]])])])):g("",!0)]),t("div",X,[o.account.category==6?(a(),r("div",Y,[t("div",Z,[x,o.account.id?(a(),r("div",oo,n(o.account.locator.people.name+" "+o.account.locator.people.surname),1)):(a(),r("div",to,n(o.property&&o.property.locator?o.property.locator.people.name+" "+o.property.locator.people.surname:""),1))])])):g("",!0),t("div",{class:m(o.account.category==6?"col-sm-4":"col-sm-6")},[t("div",eo,[so,c(t("input",{type:"text",class:"form-control",id:"inputDescription",placeholder:"Descreva a Conta",name:"description","onUpdate:modelValue":s[5]||(s[5]=e=>o.account.description=e)},null,512),[[f,o.account.description]])])],2),t("div",{class:m(o.account.category==6?"col-sm-4":"col-sm-6")},[t("div",ao,[ro,c(t("input",{type:"text",class:"form-control",id:"inputObservations",placeholder:"Descreva a Observação",name:"observations","onUpdate:modelValue":s[6]||(s[6]=e=>o.account.observations=e)},null,512),[[f,o.account.observations]])])],2)]),t("div",io,[t("div",no,[t("div",co,[lo,c(t("input",{type:"date",class:"form-control",id:"inputExpectDate",placeholder:"Informe a Data Esperada",name:"expect_date","onUpdate:modelValue":s[7]||(s[7]=e=>o.account.expect_date=e),required:""},null,512),[[f,o.account.expect_date]])])]),t("div",po,[t("div",uo,[mo,c(t("select",{class:"custom-select",id:"inputPaymentMethod",name:"payment_method","onUpdate:modelValue":s[8]||(s[8]=e=>o.account.payment_method=e)},[ho,(a(!0),r(_,null,v(o.payment_method,(e,i)=>(a(),r("option",{key:i,value:i},n(e),9,_o))),128))],512),[[h,o.account.payment_method]])])]),t("div",vo,[t("div",fo,[go,t("div",yo,[bo,D(y,w({class:"form-control",modelValue:o.account.original_value,"onUpdate:modelValue":s[9]||(s[9]=e=>o.account.original_value=e)},o.config,{id:"inputOriginalValue",placeholder:"Venda",name:"original_value"}),null,16,["modelValue"])])])])]),Co]),t("div",Vo,[o.account.id?(a(),r("button",{key:0,type:"submit",class:"btn btn-primary",onClick:s[10]||(s[10]=e=>d.updateAccount())},"Atualizar")):(a(),r("button",{key:1,type:"submit",class:"btn btn-primary",onClick:s[11]||(s[11]=e=>d.saveAccount())},"Salvar")),t("button",{class:"btn btn-danger",onClick:s[12]||(s[12]=e=>d.back())},"Voltar")])])])])}const Io=A(P,[["render",ko]]);export{Io as default};
