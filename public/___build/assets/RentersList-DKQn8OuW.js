import{a as c}from"./axios-B4uVmeYG.js";import{S as i}from"./sweetalert2-z6gKu1nJ.js";import p from"./Search-D14QtKw0.js";import{b as f}from"./utils-B-CemkDS.js";import{r as d,o as n,c as a,a as t,b as h,F as b,h as g,t as l,w as y}from"./app-e3q45BkK.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";const k={data:function(){return{renters:{},phoneMask:f}},computed:{totalPages(){return Math.ceil(this.totalItems/this.itemsPerPage)}},components:{Search:p},methods:{getRenters(o){c.get("/renters",{params:o}).then(e=>{this.renters=e.data.renters.data}).catch(e=>{i.fire({position:"top-end",icon:"error",title:e.response.data.message,showConfirmButton:!1,timer:2500})})},delete(o){c.delete("/renters/"+o).then(e=>{i.fire({position:"top-end",icon:"success",title:e.data.message,showConfirmButton:!1,timer:2500}),this.$router.go()}).catch(e=>{i.fire({position:"top-end",icon:"error",title:e.response.data.message,showConfirmButton:!1,timer:2500})})},restore(o){c.post("/renter/"+o+"/restore").then(e=>{i.fire({position:"top-end",icon:"success",title:e.data.message,showConfirmButton:!1,timer:2500}),this.$router.go()}).catch(e=>{i.fire({position:"top-end",icon:"error",title:e.response.data.message,showConfirmButton:!1,timer:2500})})},deleteRenter(o){i.fire({title:"Você tem certeza?",text:"Ao clicar em SIM, locatário será removido.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sim",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.delete(o)})},restoreRenter(o){i.fire({title:"Você tem certeza?",text:"Ao clicar em SIM, o locatário será restaurado.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sim",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.restore(o)})},updatePage(o){this.currentPage=o,this.getRenters()}},beforeMount(){this.getRenters()}},x={class:"container-fluid"},v={class:"col-md-12"},B=t("h2",null,"Locatários",-1),w={class:"card card-primary"},S=t("div",{class:"card-header"},[t("h3",{class:"card-title"},"Locatários")],-1),R={class:"card-body table-responsive p-0"},I={key:0,class:"scrollable text-left"},M={class:"table table-head-fixed text-nowrap text-left table-striped"},P=t("thead",null,[t("tr",null,[t("th",{class:"md='auto'"},"ID"),t("th",{class:"md='auto'"},"Nome"),t("th",{class:"md='auto'"},"E-mail"),t("th",{class:"md='auto'"},"Telefone"),t("th",{class:"md='auto'"},"Status"),t("th",{class:"md='auto'"}),t("th",{class:"md='auto'"})])],-1),N={key:0,style:{color:"#f89d52"}},T=t("b",null,"Ativo",-1),$=[T],A={key:1,style:{color:"red"}},E=t("b",null,"Inativo",-1),L=[E],V=t("button",{type:"button",class:"btn btn-outline-primary",title:"Editar",style:{"margin-top":"-0.5em"}},[t("i",{class:"fas fa-pencil-alt"})],-1),z={key:0,style:{"text-align":"center"}},D=["onClick"],F=t("i",{class:"fas fa-plus"},null,-1),j=[F],q=["onClick"],G=t("i",{class:"fas fa-trash"},null,-1),H=[G],J={key:1,style:{"text-align":"center"}},K=t("button",{type:"button",class:"btn btn-outline-secondary",style:{"margin-top":"-0.5em"},title:"Nenhuma Ação",disabled:""},[t("i",{class:"fas fa-hand-paper"})],-1),O=[K],Q={key:1},U=t("table",{class:"table table-head-fixed text-nowrap"},[t("tbody",null,[t("tr",{class:"text-center"},[t("td",{class:"text-center"},[t("b",null,"Nenhum cliente encontrado.")])])])],-1),W=[U];function X(o,e,Y,Z,tt,r){const u=d("search"),m=d("router-link");return n(),a("div",x,[t("div",v,[B,h(u,{route:"renter",onSearch:r.getRenters},null,8,["onSearch"]),t("div",w,[S,t("div",R,[o.renters.length>0?(n(),a("div",I,[t("table",M,[P,t("tbody",null,[(n(!0),a(b,null,g(o.renters,s=>(n(),a("tr",{key:s.id},[t("td",null,[t("b",null,l(s.id),1)]),t("td",null,l(s.people.name)+" "+l(s.people.surname),1),t("td",null,l(s.people.email),1),t("td",null,l(o.phoneMask(s.people.cellphone)),1),s.deleted_at?(n(),a("td",A,L)):(n(),a("td",N,$)),t("td",null,[h(m,{to:"/renter/"+s.id+"/edit",class:"small-box-footer"},{default:y(()=>[V]),_:2},1032,["to"])]),t("td",null,[s.transaction&&s.transaction.length==0?(n(),a("div",z,[s.deleted_at?(n(),a("button",{key:0,type:"button",class:"btn btn-outline-success",onClick:_=>r.restoreRenter(s.id),"data-toggle":"modal",style:{"margin-top":"-0.5em"},title:"Restaurar Proprietário do Imóvel"},j,8,D)):(n(),a("button",{key:1,type:"button",class:"btn btn-outline-danger",onClick:_=>r.deleteRenter(s.id),"data-toggle":"modal",style:{"margin-top":"-0.5em"},title:"Excluir Proprietário do Imóvel"},H,8,q))])):(n(),a("div",J,O))])]))),128))])])])):(n(),a("div",Q,W))])])])])}const lt=C(k,[["render",X]]);export{lt as default};
