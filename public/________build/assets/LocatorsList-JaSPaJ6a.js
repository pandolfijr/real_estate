import{a as c}from"./axios-B4uVmeYG.js";import{S as r}from"./sweetalert2-z6gKu1nJ.js";import _ from"./Search-Cs6vzgM8.js";import{b as f}from"./utils-B-CemkDS.js";import{r as d,o as a,c as n,a as t,b as h,F as b,h as g,t as i,w as y}from"./app-GEmCaaeo.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";const C={data:function(){return{locators:{people:{}},currentPage:1,itemsPerPage:30,totalItems:0,phoneMask:f}},computed:{totalPages(){return Math.ceil(this.totalItems/this.itemsPerPage)}},components:{Search:_},methods:{getLocators(o){c.get("/locators",{params:o}).then(e=>{this.locators=e.data.locators.data}).catch(e=>{r.fire({position:"top-end",icon:"error",title:e.response.data.message,title:"Você tem certeza?",text:"Ao clicar em SIM, proprietário será removido.",showConfirmButton:!1,timer:2500})})},delete(o){c.delete("/locators/"+o).then(e=>{r.fire({position:"top-end",icon:"success",title:e.data.message,showConfirmButton:!1,timer:2500}),this.$router.go()}).catch(e=>{r.fire({position:"top-end",icon:"error",title:e.response.data.message,showConfirmButton:!1,timer:4500})})},restore(o){c.post("/locator/"+o+"/restore").then(e=>{r.fire({position:"top-end",icon:"success",title:e.data.message,showConfirmButton:!1,timer:2500}),this.$router.go()}).catch(e=>{r.fire({position:"top-end",icon:"error",title:e.response.data.message,showConfirmButton:!1,timer:2500})})},deleteLocator(o){r.fire({title:"Você tem certeza?",text:"Ao clicar em SIM, proprietário será removido.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sim",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.delete(o)})},restoreLocator(o){r.fire({title:"Você tem certeza?",text:"Ao clicar em SIM, o proprietário será restaurado.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sim",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.restore(o)})},updatePage(o){this.currentPage=o,this.getLocators()}},beforeMount(){this.getLocators()}},k={class:"container-fluid"},v={class:"col-md-12"},B=t("h2",null,"Proprietários",-1),w={class:"card card-primary"},P=t("div",{class:"card-header"},[t("h3",{class:"card-title"},"Proprietários")],-1),S={class:"card-body table-responsive p-0"},L={key:0,class:"scrollable text-left"},I={class:"table table-head-fixed text-nowrap text-left table-striped"},M=t("thead",null,[t("tr",null,[t("th",{class:"md='auto'"},"ID"),t("th",{class:"md='auto'"},"Nome"),t("th",{class:"md='auto'"},"E-mail"),t("th",{class:"md='auto'"},"Telefone"),t("th",{class:"md='auto'"},"Status"),t("th",{class:"md='auto'"}),t("th",{class:"md='auto'"})])],-1),A={key:0,style:{color:"#f89d52"}},N=t("b",null,"Ativo",-1),T=[N],V={key:1,style:{color:"red"}},$=t("b",null,"Inativo",-1),E=[$],z=t("button",{type:"button",class:"btn btn-outline-primary",title:"Editar",style:{"margin-top":"-0.5em"}},[t("i",{class:"fas fa-pencil-alt"})],-1),D={key:0,style:{"text-align":"center"}},F=["onClick"],R=t("i",{class:"fas fa-plus"},null,-1),j=[R],q=["onClick"],G=t("i",{class:"fas fa-trash"},null,-1),H=[G],J={key:1,style:{"text-align":"center"}},K=t("button",{type:"button",class:"btn btn-outline-secondary",style:{"margin-top":"-0.5em"},title:"Nenhuma Ação",disabled:""},[t("i",{class:"fas fa-hand-paper"})],-1),O=[K],Q={key:1},U=t("table",{class:"table table-head-fixed text-nowrap"},[t("tbody",null,[t("tr",{class:"text-center"},[t("td",{class:"text-center"},[t("b",null,"Nenhum proprietário encontrado.")])])])],-1),W=[U];function X(o,e,Y,Z,tt,l){const m=d("search"),u=d("router-link");return a(),n("div",k,[t("div",v,[B,h(m,{route:"locator",onSearch:l.getLocators},null,8,["onSearch"]),t("div",w,[P,t("div",S,[o.locators.length>0?(a(),n("div",L,[t("table",I,[M,t("tbody",null,[(a(!0),n(b,null,g(o.locators,s=>(a(),n("tr",{key:s.id},[t("td",null,[t("b",null,i(s.id),1)]),t("td",null,i(s.people.name)+" "+i(s.people.surname),1),t("td",null,i(s.people.email),1),t("td",null,i(o.phoneMask(s.people.cellphone)),1),s.deleted_at?(a(),n("td",V,E)):(a(),n("td",A,T)),t("td",null,[h(u,{to:"/locator/"+s.id+"/edit",class:"small-box-footer"},{default:y(()=>[z]),_:2},1032,["to"])]),t("td",null,[s.transaction&&s.transaction.length==0?(a(),n("div",D,[s.deleted_at?(a(),n("button",{key:0,type:"button",class:"btn btn-outline-success",onClick:p=>l.restoreLocator(s.id),"data-toggle":"modal",style:{"margin-top":"-0.5em"},title:"Restaurar Proprietário do Imóvel"},j,8,F)):(a(),n("button",{key:1,type:"button",class:"btn btn-outline-danger",onClick:p=>l.deleteLocator(s.id),"data-toggle":"modal",style:{"margin-top":"-0.5em"},title:"Excluir Proprietário do Imóvel"},H,8,q))])):(a(),n("div",J,O))])]))),128))])])])):(a(),n("div",Q,W))])])])])}const it=x(C,[["render",X]]);export{it as default};
