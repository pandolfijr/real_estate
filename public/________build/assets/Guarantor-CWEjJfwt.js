import{S as m}from"./sweetalert2-z6gKu1nJ.js";import{a as u}from"./axios-B4uVmeYG.js";import{M as v,N as y,c as C,i as k}from"./utils-B-CemkDS.js";import{r as E,i as U,o as a,c as l,a as e,t as f,j as n,v as i,k as _,F as g,h,b as D,m as F}from"./app-GEmCaaeo.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={data:function(){return{data:{},guarantor:{id:"",income:"",income_proof:"",address_proof:"",cpf_proof:"",rg_proof:"",rg:"",cpf:"",id_people:"",people_exists:!1,people:{name:"",surname:"",cpf:"",rg:"",cellphone:"",email:"",address:"",cep:"",complement:"",number:"",marital_status:"",birth_date:"",district:"",id_city:"",profession:""}},config:{decimal:",",thousands:".",prefix:"R$ ",precision:2,masked:!1},documents:[],cities:{},send_cpf:!1,send_rg:!1,send_address:!1,send_income:!1,send_property:!1,marital_status:v,handleFileUpload:y,onError:C,isNumber:k}},computed:{},methods:{getGuarantor(){u.get("/guarantors/"+this.$route.params.id).then(o=>{this.guarantor=o.data.guarantor}).catch(o=>{console.error("Houve um problema com a requisição:",o)})},saveGuarantor(){this.handlesSpecialCharacters(),this.documents.length>0&&(this.guarantor.documents=this.documents),u.post("/guarantors",this.guarantor).then(o=>{m.fire({position:"top-end",icon:"success",title:o.data.message,showConfirmButton:!1,timer:2500}),this.$router.go(-1)}).catch(o=>{o&&o.response.data.errors?o=this.onError(o):o=o.response.data,m.fire({position:"top-end",icon:"error",title:o.message,showConfirmButton:!1,timer:2500})})},updateGuarantor(){this.handlesSpecialCharacters(),this.documents.length>0&&(this.locator.documents=this.documents),u.put("/guarantors/"+this.$route.params.id,this.guarantor).then(o=>{m.fire({position:"top-end",icon:"success",title:o.data.message,showConfirmButton:!1,timer:2500}),this.$router.go(-1)}).catch(o=>{m.fire({position:"top-end",icon:"error",title:o.response.data.message,showConfirmButton:!1,timer:2500})})},getCities(){u.get("/cities",{}).then(o=>{this.cities=o.data.cities}).catch(o=>{console.error("Houve um problema com a requisição:",o)})},back(){this.$router.go(-1)},handlesSpecialCharacters(){this.guarantor.people.cpf=this.guarantor.people.cpf!=null?this.guarantor.people.cpf.replace(/[.\-\s()]/g,""):"",this.guarantor.people.rg=this.guarantor.people.rg!=null?this.guarantor.people.rg.replace(/[.\-\s()]/g,""):"",this.guarantor.people.cellphone=this.guarantor.people.cellphone!=null?this.guarantor.people.cellphone.replace(/[.\-\s()]/g,""):"",this.guarantor.people.cep=this.guarantor.people.cep!=null?this.guarantor.people.cep.replace(/[.\-\s()]/g,""):""},getPeopleByCpf(o){let s=o.target.value;if(s=s!=null?s.replace(/[.\-\s()]/g,""):null,!s)return!1;u.get("/people/"+this.$route.params.id+"/get-by-cpf",{params:{cpf:s}}).then(d=>{d.data.people&&(this.guarantor.id_people=d.data.people.id,this.guarantor.people=d.data.people,this.guarantor.people_exists=!0)}).catch(d=>{console.error("Houve um problema com a requisição:",d)})},clearFilter(){this.$router.go()},validateDocument(o){return this.guarantor.people.documents?this.guarantor.people.documents.some(d=>d.type_document===o):!1}},created(){this.getCities(),this.$route.params.id&&this.getGuarantor()}},S={class:"container-fluid"},w={class:"col-md-12"},B=e("h2",null,"Fiadores",-1),I={class:"card card-primary"},P={class:"card-header"},$={class:"card-title"},R={class:"card-body"},G={class:"row"},M={class:"col-sm-3"},q={class:"form-group"},A=e("label",{for:"inputName"},"Nome",-1),H=["disabled"],j={class:"col-sm-3"},K={class:"form-group"},L=e("label",{for:"inputSurname"},"Sobrenome",-1),z=["disabled"],T={class:"col-sm-3"},J={class:"form-group"},O=e("label",{for:"inputBirthDate"},"Dt. Nascimento",-1),Q=["disabled"],W={class:"col-sm-3"},X={class:"form-group"},Y=e("label",{for:"inputMaritalStatus"},"Estado Civil",-1),Z=["disabled"],x=e("option",{value:""},"Selecione Estado Civil",-1),ee=["id","value"],oe={class:"row"},se={class:"col-sm-3"},te={class:"form-group"},ae=e("label",{for:"inputCpf"},"CPF",-1),le=["disabled"],ne={class:"col-sm-3"},ie=e("label",{class:"form-label",for:"customFile"},"Comprovante de CPF",-1),re=e("br",null,null,-1),de={key:0},pe=e("label",null,"Comprovante Enviado",-1),ue=e("i",{class:"fas fa-upload"},null,-1),me=[ue],ce=["disabled"],fe={class:"col-sm-3"},_e={class:"form-group"},ge=e("label",{for:"inputRg"},"RG",-1),he=["disabled"],be={class:"col-sm-3"},ve=e("label",{class:"form-label",for:"customFile"},"Comprovante de RG",-1),ye=e("br",null,null,-1),Ce={key:0},ke=e("label",null,"Comprovante Enviado",-1),Ee=e("i",{class:"fas fa-upload"},null,-1),Ue=[Ee],De=["disabled"],Fe={class:"row"},Ve={class:"col-sm-3"},Ne={class:"form-group"},Se=e("label",{for:"inputCellphone"},"Celular",-1),we=["disabled"],Be={class:"col-sm-3"},Ie={class:"form-group"},Pe=e("label",{for:"inputEmail"},"Email",-1),$e=["disabled"],Re={class:"col-sm-4"},Ge={class:"form-group"},Me=e("label",{for:"inputAddress"},"Endereço",-1),qe=["disabled"],Ae={class:"col-sm-2"},He={class:"form-group"},je=e("label",{for:"inputNumber"},"Número",-1),Ke=["disabled"],Le={class:"row"},ze={class:"col-sm-2"},Te={class:"form-group"},Je=e("label",{for:"inputDistrict"},"Bairro",-1),Oe=["disabled"],Qe={class:"col-sm-3"},We={class:"form-group"},Xe=e("label",{for:"inputComplement"},"Complemento",-1),Ye=["disabled"],Ze={class:"col-sm-2"},xe={class:"form-group"},eo=e("label",{for:"inputIdCity"},"Cidade",-1),oo=["disabled"],so=e("option",{value:""},"Selecione a Cidade",-1),to=["id","value"],ao={class:"col-sm-2"},lo={class:"form-group"},no=e("label",{for:"inputCep"},"CEP",-1),io=["disabled"],ro={class:"col-sm-3"},po=e("label",{class:"form-label",for:"customFile"},"Comprovante de Residência",-1),uo=e("br",null,null,-1),mo={class:"row"},co={class:"col-sm-6"},fo=e("label",{class:"form-label",for:"customFile"},"Comprovante de Registro de Imóvel",-1),_o=e("br",null,null,-1),go={key:0},ho=e("label",null,"Comprovante Enviado",-1),bo=e("i",{class:"fas fa-upload"},null,-1),vo=[bo],yo=e("div",{class:"row"},[e("div",{class:"col-sm-12"},[e("div",{class:"card-footer"})])],-1),Co={class:"row"},ko={class:"col-sm-3"},Eo={class:"form-group"},Uo=e("label",{for:"inputProfession"},"Profissão",-1),Do={class:"col-sm-3"},Fo={class:"form-group"},Vo=e("label",{for:"inputIncome"},"Renda Mensal",-1),No={class:"input-group"},So=e("div",{class:"input-group-prepend"},[e("span",{class:"input-group-text"},[e("i",{class:"fas fa-dollar-sign"})])],-1),wo={class:"col-sm-6"},Bo=e("label",{class:"form-label",for:"customFile"},"Comprovante de Renda",-1),Io=e("br",null,null,-1),Po={key:0},$o=e("label",null,"Comprovante Enviado",-1),Ro=e("i",{class:"fas fa-upload"},null,-1),Go=[Ro],Mo=e("div",{class:"row"},[e("div",{class:"row"},[e("div",{class:"col-sm-12"},[e("div",{class:"card-footer"})])])],-1),qo={class:"modal-footer justify-content-center"};function Ao(o,s,d,Ho,jo,r){const b=E("money3"),c=U("mask");return a(),l("div",S,[e("div",w,[B,e("div",I,[e("div",P,[e("h3",$,f(o.guarantor.id?"Editar Fiador":"Cadastrar Fiador"),1)]),e("div",R,[e("div",G,[e("div",M,[e("div",q,[A,n(e("input",{type:"text",class:"form-control",id:"inputName",name:"name",disabled:o.guarantor.people_exists,placeholder:"Informe o Nome",maxlength:"20",value:"","onUpdate:modelValue":s[0]||(s[0]=t=>o.guarantor.people.name=t)},null,8,H),[[i,o.guarantor.people.name]])])]),e("div",j,[e("div",K,[L,n(e("input",{type:"text",class:"form-control",id:"inputSurname",disabled:o.guarantor.people_exists,placeholder:"Informe o Sobrenome",name:"surname",maxlength:"70","onUpdate:modelValue":s[1]||(s[1]=t=>o.guarantor.people.surname=t)},null,8,z),[[i,o.guarantor.people.surname]])])]),e("div",T,[e("div",J,[O,n(e("input",{type:"date",class:"form-control",id:"inputBirthDate",placeholder:"Informe a Data de Nascimento",name:"birth_date",disabled:o.guarantor.people_exists,"onUpdate:modelValue":s[2]||(s[2]=t=>o.guarantor.people.birth_date=t)},null,8,Q),[[i,o.guarantor.people.birth_date]])])]),e("div",W,[e("div",X,[Y,n(e("select",{class:"custom-select",id:"inputMaritalStatus",name:"marital_status",disabled:o.guarantor.people_exists,"onUpdate:modelValue":s[3]||(s[3]=t=>o.guarantor.people.marital_status=t)},[x,(a(!0),l(g,null,h(o.marital_status,(t,p)=>(a(),l("option",{key:p,id:p,value:p},f(t),9,ee))),128))],8,Z),[[_,o.guarantor.people.marital_status]])])])]),e("div",oe,[e("div",se,[e("div",te,[ae,n(e("input",{type:"text",class:"form-control cpf",id:"inputCpf",name:"cpf",disabled:o.guarantor.people_exists,"onUpdate:modelValue":s[4]||(s[4]=t=>o.guarantor.people.cpf=t),placeholder:"Informe o CPF",onBlur:s[5]||(s[5]=t=>r.getPeopleByCpf(t)),masked:"false"},null,40,le),[[i,o.guarantor.people.cpf],[c,"###.###.###-##"]])])]),e("div",ne,[ie,re,r.validateDocument("cpf")&&!o.send_cpf?(a(),l("div",de,[pe,e("button",{type:"button",class:"btn btn-outline-primary",title:"Enviar Novo Documento",style:{"margin-top":"-0.5em","margin-left":"1em"},onClick:s[6]||(s[6]=t=>o.send_cpf=!0)},me)])):(a(),l("input",{key:1,class:"form-label",type:"file",id:"cpf_proof",name:"cpf_proof",disabled:o.guarantor.people_exists,onChange:s[7]||(s[7]=t=>o.handleFileUpload(t,"cpf"))},null,40,ce))]),e("div",fe,[e("div",_e,[ge,n(e("input",{type:"text",class:"form-control cpf",id:"inputRg",name:"rg",maxlength:"11","onUpdate:modelValue":s[8]||(s[8]=t=>o.guarantor.people.rg=t),placeholder:"Informe o RG",disabled:o.guarantor.people_exists,onKeypress:s[9]||(s[9]=t=>o.isNumber(t))},null,40,he),[[i,o.guarantor.people.rg]])])]),e("div",be,[ve,ye,r.validateDocument("rg")&&!o.send_rg?(a(),l("div",Ce,[ke,e("button",{type:"button",class:"btn btn-outline-primary",title:"Enviar Novo Documento",style:{"margin-top":"-0.5em","margin-left":"1em"},onClick:s[10]||(s[10]=t=>o.send_rg=!0)},Ue)])):(a(),l("input",{key:1,class:"form-label",type:"file",id:"rg_proof",name:"rg_proof",disabled:o.guarantor.people_exists,onChange:s[11]||(s[11]=t=>o.handleFileUpload(t,"rg"))},null,40,De))])]),e("div",Fe,[e("div",Ve,[e("div",Ne,[Se,n(e("input",{type:"text",class:"form-control",id:"inputCellphone",name:"cellphone","onUpdate:modelValue":s[12]||(s[12]=t=>o.guarantor.people.cellphone=t),placeholder:"Informe o Celular",disabled:o.guarantor.people_exists,masked:"false"},null,8,we),[[i,o.guarantor.people.cellphone],[c,["(##) ####-####","(##) #####-####"]]])])]),e("div",Be,[e("div",Ie,[Pe,n(e("input",{type:"text",class:"form-control",id:"inputEmail",maxlength:"40",disabled:o.guarantor.people_exists,"onUpdate:modelValue":s[13]||(s[13]=t=>o.guarantor.people.email=t),name:"email",placeholder:"Informe o Email"},null,8,$e),[[i,o.guarantor.people.email]])])]),e("div",Re,[e("div",Ge,[Me,n(e("input",{type:"text",class:"form-control",id:"inputAddress",disabled:o.guarantor.people_exists,"onUpdate:modelValue":s[14]||(s[14]=t=>o.guarantor.people.address=t),placeholder:"Digite o Endereço",name:"address",maxlength:"100"},null,8,qe),[[i,o.guarantor.people.address]])])]),e("div",Ae,[e("div",He,[je,n(e("input",{type:"text",class:"form-control",id:"inputNumber",disabled:o.guarantor.people_exists,"onUpdate:modelValue":s[15]||(s[15]=t=>o.guarantor.people.number=t),placeholder:"No.",name:"number",maxlength:"11",onKeypress:s[16]||(s[16]=t=>o.isNumber(t))},null,40,Ke),[[i,o.guarantor.people.number]])])])]),e("div",Le,[e("div",ze,[e("div",Te,[Je,n(e("input",{type:"text",class:"form-control",id:"inputDistrict",disabled:o.guarantor.people_exists,"onUpdate:modelValue":s[17]||(s[17]=t=>o.guarantor.people.district=t),placeholder:"Digite o Bairro",maxlength:"50",name:"district"},null,8,Oe),[[i,o.guarantor.people.district]])])]),e("div",Qe,[e("div",We,[Xe,n(e("input",{type:"text",class:"form-control",id:"inputComplement",disabled:o.guarantor.people_exists,"onUpdate:modelValue":s[18]||(s[18]=t=>o.guarantor.people.complement=t),placeholder:"Digite o Complemento",name:"complement",maxlength:"100"},null,8,Ye),[[i,o.guarantor.people.complement]])])]),e("div",Ze,[e("div",xe,[eo,n(e("select",{class:"custom-select",id:"inputIdCity",name:"id_city",disabled:o.guarantor.people_exists,"onUpdate:modelValue":s[19]||(s[19]=t=>o.guarantor.people.id_city=t)},[so,(a(!0),l(g,null,h(o.cities,(t,p)=>(a(),l("option",{key:p,id:p,value:t.id},f(t.name),9,to))),128))],8,oo),[[_,o.guarantor.people.id_city]])])]),e("div",ao,[e("div",lo,[no,n(e("input",{type:"text",class:"form-control cep",id:"cep",placeholder:"Digite o CEP",disabled:o.guarantor.people_exists,masked:"false",name:"cep","onUpdate:modelValue":s[20]||(s[20]=t=>o.guarantor.people.cep=t)},null,8,io),[[c,"#####-###"],[i,o.guarantor.people.cep]])])]),e("div",ro,[po,uo,e("input",{class:"form-label",type:"file",id:"address_proof",name:"address_proof",onChange:s[21]||(s[21]=t=>o.handleFileUpload(t,"address"))},null,32)])]),e("div",mo,[e("div",co,[fo,_o,r.validateDocument("property")&&!o.send_property?(a(),l("div",go,[ho,e("button",{type:"button",class:"btn btn-outline-primary",title:"Enviar Novo Documento",style:{"margin-top":"-0.5em","margin-left":"1em"},onClick:s[22]||(s[22]=t=>o.send_property=!0)},vo)])):(a(),l("input",{key:1,class:"form-label",type:"file",id:"property_registration",name:"property_registration",onChange:s[23]||(s[23]=t=>o.handleFileUpload(t,"property"))},null,32))])]),yo,e("div",Co,[e("div",ko,[e("div",Eo,[Uo,n(e("input",{type:"text",class:"form-control",id:"inputProfession",maxlength:"40","onUpdate:modelValue":s[24]||(s[24]=t=>o.guarantor.people.profession=t),name:"profession",placeholder:"Informe a Profissão"},null,512),[[i,o.guarantor.people.profession]])])]),e("div",Do,[e("div",Fo,[Vo,e("div",No,[So,D(b,F({class:"form-control",modelValue:o.guarantor.income,"onUpdate:modelValue":s[25]||(s[25]=t=>o.guarantor.income=t)},o.config,{id:"inputIncome",placeholder:"Valor da Renda",name:"sale_value"}),null,16,["modelValue"])])])]),e("div",wo,[Bo,Io,r.validateDocument("income")&&!o.send_income?(a(),l("div",Po,[$o,e("button",{type:"button",class:"btn btn-outline-primary",title:"Enviar Novo Documento",style:{"margin-top":"-0.5em","margin-left":"1em"},onClick:s[26]||(s[26]=t=>o.send_income=!0)},Go)])):(a(),l("input",{key:1,class:"form-label",type:"file",id:"income_proof",name:"income_proof",onChange:s[27]||(s[27]=t=>o.handleFileUpload(t,"income"))},null,32))])]),Mo,e("div",qo,[o.guarantor.id?(a(),l("button",{key:0,type:"submit",class:"btn btn-primary",onClick:s[28]||(s[28]=t=>r.updateGuarantor())}," Atualizar ")):(a(),l("button",{key:1,type:"submit",class:"btn btn-primary",onClick:s[29]||(s[29]=t=>r.saveGuarantor())}," Salvar ")),e("button",{class:"btn btn-danger",onClick:s[30]||(s[30]=t=>r.back())},"Voltar"),e("button",{onClick:s[31]||(s[31]=t=>r.clearFilter()),class:"btn btn-secondary"},"Limpar")])])])])])}const Oo=V(N,[["render",Ao]]);export{Oo as default};
