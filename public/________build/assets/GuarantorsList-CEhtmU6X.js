import{a as c}from"./axios-B4uVmeYG.js";import{S as r}from"./sweetalert2-z6gKu1nJ.js";import p from"./Search-Cs6vzgM8.js";import{b as f}from"./utils-B-CemkDS.js";import{r as d,o as a,c as n,a as t,b as u,F as g,h as b,t as i,w as y}from"./app-GEmCaaeo.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";const x={data:function(){return{guarantors:{},currentPage:1,itemsPerPage:10,totalItems:100,filter:{current_page:1,status:"",search:""},phoneMask:f}},computed:{totalPages(){return Math.ceil(this.totalItems/this.itemsPerPage)}},components:{Search:p},methods:{getGuarantors(o){c.get("/guarantors",{params:o}).then(e=>{this.guarantors=e.data.guarantors.data}).catch(e=>{r.fire({position:"top-end",icon:"error",title:e.response.data.message,showConfirmButton:!1,timer:2500})})},delete(o){c.delete("/guarantors/"+o).then(e=>{r.fire({position:"top-end",icon:"success",title:e.data.message,showConfirmButton:!1,timer:2500}),this.$router.go()}).catch(e=>{r.fire({position:"top-end",icon:"error",title:e.response.data.message,showConfirmButton:!1,timer:2500})})},restore(o){c.post("/guarantor/"+o+"/restore").then(e=>{r.fire({position:"top-end",icon:"success",title:e.data.message,showConfirmButton:!1,timer:2500}),this.$router.go()}).catch(e=>{r.fire({position:"top-end",icon:"error",title:e.response.data.message,showConfirmButton:!1,timer:2500})})},deleteGuarantor(o){r.fire({title:"Você tem certeza?",text:"Ao clicar em SIM, proprietário será removido.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sim",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.delete(o)})},restoreGuarantor(o){r.fire({title:"Você tem certeza?",text:"Ao clicar em SIM, o proprietário será restaurado.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sim",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.restore(o)})},updatePage(o){this.currentPage=o,this.getGuarantors()}},created(){this.getGuarantors()}},k={class:"container-fluid"},B={class:"col-md-12"},v=t("h2",null," Fiadores",-1),w={class:"card card-primary"},S=t("div",{class:"card-header"},[t("h3",{class:"card-title"},"Fiadores")],-1),G={class:"card-body table-responsive p-0"},P={key:0,class:"scrollable text-left"},F={class:"table table-head-fixed text-nowrap text-left table-striped"},I=t("thead",null,[t("tr",null,[t("th",{class:"md='auto'"},"ID"),t("th",{class:"md='auto'"},"Nome"),t("th",{class:"md='auto'"},"E-mail"),t("th",{class:"md='auto'"},"Telefone"),t("th",{class:"md='auto'"},"Status"),t("th",{class:"md='auto'"}),t("th",{class:"md='auto'"})])],-1),M={key:0,style:{color:"#f89d52"}},T=t("b",null,"Ativo",-1),$=[T],E={key:1,style:{color:"red"}},N=t("b",null,"Inativo",-1),V=[N],A=t("button",{type:"button",class:"btn btn-outline-primary",title:"Editar",style:{"margin-top":"-0.5em"}},[t("i",{class:"fas fa-pencil-alt"})],-1),z={style:{"text-align":"center"}},D=["onClick"],L=t("i",{class:"fas fa-plus"},null,-1),R=[L],j=["onClick"],q=t("i",{class:"fas fa-trash"},null,-1),H=[q],J={key:1},K=t("table",{class:"table table-head-fixed text-nowrap"},[t("tbody",null,[t("tr",{class:"text-center"},[t("td",{class:"text-center"},[t("b",null,"Nenhum fiador encontrado.")])])])],-1),O=[K];function Q(o,e,U,W,X,l){const h=d("search"),m=d("router-link");return a(),n("div",k,[t("div",B,[v,u(h,{route:"guarantor",onSearch:l.getGuarantors},null,8,["onSearch"]),t("div",w,[S,t("div",G,[o.guarantors.length>0?(a(),n("div",P,[t("table",F,[I,t("tbody",null,[(a(!0),n(g,null,b(o.guarantors,s=>(a(),n("tr",{key:s.id},[t("td",null,[t("b",null,i(s.id),1)]),t("td",null,i(s.people.name)+" "+i(s.people.surname),1),t("td",null,i(s.people.email),1),t("td",null,i(o.phoneMask(s.people.cellphone)),1),s.deleted_at?(a(),n("td",E,V)):(a(),n("td",M,$)),t("td",null,[u(m,{to:"/guarantor/"+s.id+"/edit",class:"small-box-footer"},{default:y(()=>[A]),_:2},1032,["to"])]),t("td",null,[t("div",z,[s.deleted_at?(a(),n("button",{key:0,type:"button",class:"btn btn-outline-success",onClick:_=>l.restoreGuarantor(s.id),"data-toggle":"modal",style:{"margin-top":"-0.5em"},title:"Restaurar Fiador"},R,8,D)):(a(),n("button",{key:1,type:"button",class:"btn btn-outline-danger",onClick:_=>l.deleteGuarantor(s.id),"data-toggle":"modal",style:{"margin-top":"-0.5em"},title:"Excluir Fiador"},H,8,j))])])]))),128))])])])):(a(),n("div",J,O))])])])])}const at=C(x,[["render",Q]]);export{at as default};
