import{B as m,E as p,c as u,f as h}from"./utils-B-CemkDS.js";import{S as l}from"./sweetalert2-z6gKu1nJ.js";import{a as r}from"./axios-B4uVmeYG.js";import{r as f,o as a,c as i,a as t,t as o,j as c,v,b,m as g,k as y,F as k,h as D,s as I}from"./app-CaSvgjMt.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const C={watch:{},data:function(){return{data:{},installment:{id:"",current_installment:"",total_installments:"",status:"",due_date:"",date_received:"",description:"",identification_code:"",observations:"",type_installment:"",id_transact:"",id_locator:"",id_property:"",payment_method:"",id_check:"",installment_value:"",insurance_value:"",insurance_number:"",installment_total_value:"",id_renter:"",discount_value:"",penalty_value:"",id_casher:"",action:2,id_bank_account:"",id_bank_account_transfer:"",property:{reference:""},renter:{people:{}},locator:{people:{}},transfer_value:""},config:{decimal:",",thousands:".",prefix:"R$ ",precision:2,masked:!1},payment_method:m,types_post_installment:p,onError:u,formatDate:h}},methods:{getInstallment(){r.get("/installments/"+this.$route.params.id).then(s=>{this.installment=s.data.installment,this.installment.transfer_value=this.installment.installment_total_value-this.installment.property.administrative_tax_value}).catch(s=>{console.error("Houve um problema com a requisição:",s)})},updateInstallment(){r.post("/transfer/"+this.$route.params.id+"/send-transfer",this.installment).then(s=>{l.fire({position:"top-end",icon:"success",title:s.data.message,showConfirmButton:!1,timer:2500}),this.$router.go(-1)}).catch(s=>{l.fire({position:"top-end",icon:"error",title:s.response.data.message,showConfirmButton:!1,timer:2500})})},back(){this.$router.go(-1)},getBankAccounts(){r.get("/casher-account").then(s=>{this.casher_account=s.data.casher_account.data}).catch(s=>{s=this.onError(s),l.fire({position:"top-end",icon:"error",title:s.response.data.message,showConfirmButton:!1,timer:2500})})}},beforeMount(){this.getBankAccounts(),this.$route.params.id&&this.getInstallment()}},$={class:"container-fluid"},w={class:"col-md-12"},P=t("h2",null,"Fazer Repasse",-1),B={class:"card card-primary"},F=t("div",{class:"card-header"},[t("h3",{class:"card-title"},"Parcela à Repassar")],-1),R={class:"card-body"},A={class:"row"},S={class:"col-sm-2"},T={class:"form-group"},E=t("label",{for:"inputIdAccount"},"Parcela Atual",-1),L={class:"form-control",id:"inputCurrentInstallment",name:"current_installment",readonly:""},M={class:"col-sm-2"},z={class:"form-group"},U=t("label",{for:"inputIdAccount"},"Total de Parcelas",-1),j={class:"form-control",id:"inputTotalInstallment",name:"total_installment",readonly:""},q={class:"col-sm-2"},N={class:"form-group"},O=t("label",{for:"inputDescription"},"Status",-1),H={class:"form-control",readonly:"true"},G={class:"col-sm-2"},J={class:"form-group"},K=t("label",{for:"inputCheckDueDate"},"Data de Vencimento",-1),Q={class:"col-sm-2"},W={class:"form-group"},X=t("label",{for:"inputDischargeDate"},"Data Recebimento",-1),Y={class:"form-control",readonly:""},Z={class:"col-sm-2"},x={class:"form-group"},tt=t("label",{for:"inputPaymentMethod"},"Método de Recebimento",-1),st={class:"form-control",readonly:""},et={class:"row"},ot={class:"col-sm-6"},nt={class:"form-group"},at=t("label",{for:"inputDescription"},"Descrição",-1),it={class:"form-control",readonly:"true"},lt={class:"col-sm-6"},rt={class:"form-group"},dt=t("label",{for:"inputIdLocator"},"Descrição do Imóvel",-1),ct={key:0,class:"form-control",readonly:"true"},_t={key:1,class:"form-control",readonly:"true"},mt={class:"row"},pt={class:"col-sm-6"},ut={class:"form-group"},ht=t("label",{for:"inputLocator"},"Locatário",-1),ft={class:"form-control",readonly:"true"},vt={class:"col-sm-6"},bt={class:"form-group"},gt=t("label",{for:"inputIdLocator"},"Proprietário do Imóvel",-1),yt={class:"form-control",readonly:"true"},kt={class:"row"},Dt={class:"col-sm-2"},It={class:"form-group"},Vt=t("label",{for:"inputFinalValue"},"Valor Parcela",-1),Ct={class:"input-group"},$t=t("div",{class:"input-group-prepend"},[t("span",{class:"input-group-text"},[t("i",{class:"fas fa-dollar-sign"})])],-1),wt={class:"form-control",readonly:""},Pt={class:"col-sm-2"},Bt={class:"form-group"},Ft=t("label",{for:"inputDiscountValue"},"Taxa Adm.",-1),Rt={class:"input-group"},At=t("div",{class:"input-group-prepend"},[t("span",{class:"input-group-text"},[t("i",{class:"fas fa-percentage"})])],-1),St={class:"form-control",readonly:""},Tt={class:"col-sm-2"},Et={class:"form-group"},Lt=t("label",{for:"inputInstallmentValue"},"Comissão Imobiliária",-1),Mt={class:"input-group"},zt=t("div",{class:"input-group-prepend"},[t("span",{class:"input-group-text"},[t("i",{class:"fas fa-dollar-sign"})])],-1),Ut={class:"form-control",readonly:""},jt={class:"col-sm-3"},qt={class:"form-group"},Nt=t("label",{for:"inputInstallmentValue"},"Valor Repasse",-1),Ot={class:"input-group"},Ht=t("div",{class:"input-group-prepend"},[t("span",{class:"input-group-text"},[t("i",{class:"fas fa-dollar-sign"})])],-1),Gt={class:"col-sm-3"},Jt={class:"form-group"},Kt=t("label",{for:"inputObservations"},"Conta para Retirada",-1),Qt=t("option",{value:""},"Selecione... ",-1),Wt=["id","disabled","value"],Xt=t("br",null,null,-1),Yt={class:"modal-footer justify-content-center"},Zt=["disabled"];function xt(s,n,ts,ss,es,d){const _=f("money3");return a(),i("div",$,[t("div",w,[P,t("div",B,[F,t("div",R,[t("div",A,[t("div",S,[t("div",T,[E,t("div",L,o(s.installment.current_installment),1)])]),t("div",M,[t("div",z,[U,t("div",j,o(s.installment.total_installments),1)])]),t("div",q,[t("div",N,[O,t("div",H,o(s.types_post_installment[s.installment.type_installment]),1)])]),t("div",G,[t("div",J,[K,c(t("input",{type:"date",class:"form-control",id:"inputCheckDueDate",name:"due_date","onUpdate:modelValue":n[0]||(n[0]=e=>s.installment.due_date=e),disabled:""},null,512),[[v,s.installment.due_date]])])]),t("div",Q,[t("div",W,[X,t("div",Y,o(s.installment.date_received?s.formatDate(s.installment.date_received):"Pendente"),1)])]),t("div",Z,[t("div",x,[tt,t("div",st,o(s.payment_method[s.installment.payment_method]),1)])])]),t("div",et,[t("div",ot,[t("div",nt,[at,t("div",it,o(s.installment.description)+" | "+o(s.installment.property.reference?s.installment.property.reference:""),1)])]),t("div",lt,[t("div",rt,[dt,s.installment&&s.installment.property&&s.installment.property.description?(a(),i("div",ct,o(s.installment.property.description.length>30?s.installment.property.description.substring(0,30)+"...":s.installment.property.description),1)):(a(),i("div",_t))])])]),t("div",mt,[t("div",pt,[t("div",ut,[ht,t("div",ft,o(s.installment.renter.people.name),1)])]),t("div",vt,[t("div",bt,[gt,t("div",yt,o(s.installment.locator.people.name),1)])])]),t("div",kt,[t("div",Dt,[t("div",It,[Vt,t("div",Ct,[$t,t("div",wt,o(s.installment.installment_value),1)])])]),t("div",Pt,[t("div",Bt,[Ft,t("div",Rt,[At,t("div",St,o(s.installment.property.administrative_tax_percentual),1)])])]),t("div",Tt,[t("div",Et,[Lt,t("div",Mt,[zt,t("div",Ut," R$ "+o(s.installment.property.administrative_tax_value),1)])])]),t("div",jt,[t("div",qt,[Nt,t("div",Ot,[Ht,b(_,g({class:"form-control",modelValue:s.installment.transfer_value,"onUpdate:modelValue":n[1]||(n[1]=e=>s.installment.transfer_value=e)},s.config,{id:"inputAdministrativeTaxPercentual",name:"transfer_value"}),null,16,["modelValue"])])])]),t("div",Gt,[t("div",Jt,[Kt,c(t("select",{class:"custom-select",id:"inputIdAccount",name:"id_bank_account",required:"","onUpdate:modelValue":n[2]||(n[2]=e=>s.installment.id_bank_account_transfer=e)},[Qt,(a(!0),i(k,null,D(s.casher_account,e=>(a(),i("option",{key:e.bank_account.id,id:e.bank_account.id,disabled:parseFloat(s.installment.transfer_value)>parseFloat(e.current_value),style:I(parseFloat(s.installment.transfer_value)>parseFloat(e.current_value)?"background-color: #e9ecef; color: red;":""),value:e.bank_account.id},o(e.bank_account.bank_name+" - "+e.bank_account.account_name),13,Wt))),128))],512),[[y,s.installment.id_bank_account_transfer]])])])]),Xt]),t("div",Yt,[t("button",{type:"submit",class:"btn btn-primary",onClick:n[3]||(n[3]=e=>d.updateInstallment()),disabled:!s.installment.id_bank_account_transfer},"Fazer Repasse",8,Zt),t("button",{class:"btn btn-danger",onClick:n[4]||(n[4]=e=>d.back())},"Voltar")])])])])}const rs=V(C,[["render",xt]]);export{rs as default};
